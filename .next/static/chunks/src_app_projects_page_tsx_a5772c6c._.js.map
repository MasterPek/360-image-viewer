{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/app/projects/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport {\n  Box,\n  Container,\n  Grid,\n  Card,\n  CardContent,\n  CardMedia,\n  Typography,\n  Button,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  Fab,\n  IconButton,\n  Menu,\n  MenuItem,\n} from '@mui/material';\nimport { Add as AddIcon, MoreVert as MoreVertIcon } from '@mui/icons-material';\nimport { useAuth } from '@/contexts/AuthContext';\n\ninterface Project {\n  id: string;\n  name: string;\n  description: string;\n  imageCount: number;\n  thumbnail?: string;\n}\n\nexport default function ProjectsPage() {\n  const [projects, setProjects] = useState<Project[]>([\n    {\n      id: '1',\n      name: 'Project A',\n      description: 'First project description',\n      imageCount: 3,\n      thumbnail: undefined,\n    },\n  ]);\n  const [openNewProject, setOpenNewProject] = useState(false);\n  const [newProjectName, setNewProjectName] = useState('');\n  const [newProjectDescription, setNewProjectDescription] = useState('');\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const [selectedProject, setSelectedProject] = useState<Project | null>(null);\n  // Removed local isLoading state\n  const router = useRouter();\n  const { user, isLoading } = useAuth();\n\n  useEffect(() => {\n    if (!user && !isLoading) {\n      router.push('/login');\n    }\n  }, [user, router, isLoading]);\n\n  if (isLoading || !user) {\n    return null;\n  }\n\n  const handleCreateProject = () => {\n    const newProject: Project = {\n      id: Date.now().toString(),\n      name: newProjectName,\n      description: newProjectDescription,\n      imageCount: 0,\n    };\n    setProjects([...projects, newProject]);\n    setOpenNewProject(false);\n    setNewProjectName('');\n    setNewProjectDescription('');\n  };\n\n  const handleProjectClick = (project: Project) => {\n    router.push(`/projects/${project.id}`);\n  };\n\n  const handleMenuOpen = (event: React.MouseEvent<HTMLElement>, project: Project) => {\n    event.stopPropagation();\n    setAnchorEl(event.currentTarget);\n    setSelectedProject(project);\n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n    setSelectedProject(null);\n  };\n\n  const handleDeleteProject = () => {\n    if (selectedProject) {\n      setProjects(projects.filter(p => p.id !== selectedProject.id));\n      handleMenuClose();\n    }\n  };\n\n  return (\n    <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 4 }}>\n        <Typography variant=\"h4\" component=\"h1\">\n          Projects\n        </Typography>\n        <Fab\n          color=\"primary\"\n          aria-label=\"add project\"\n          onClick={() => setOpenNewProject(true)}\n        >\n          <AddIcon />\n        </Fab>\n      </Box>\n\n      <Grid container spacing={3}>\n        {projects.map((project) => (\n          <Grid item xs={12} sm={6} md={4} key={project.id}>\n            <Card \n              sx={{ \n                height: '100%',\n                cursor: 'pointer',\n                '&:hover': { transform: 'scale(1.02)', transition: 'transform 0.2s' }\n              }}\n              onClick={() => handleProjectClick(project)}\n            >\n              <CardMedia\n                component=\"div\"\n                sx={{\n                  height: 200,\n                  backgroundColor: 'grey.300',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                }}\n              >\n                {project.thumbnail ? (\n                  <Box\n                    component=\"img\"\n                    src={project.thumbnail}\n                    alt={project.name}\n                    sx={{\n                      width: '100%',\n                      height: '100%',\n                      objectFit: 'cover',\n                    }}\n                  />\n                ) : (\n                  <Typography variant=\"h6\" color=\"text.secondary\">\n                    No images\n                  </Typography>\n                )}\n              </CardMedia>\n              <CardContent sx={{ position: 'relative' }}>\n                <IconButton\n                  sx={{ position: 'absolute', top: 8, right: 8 }}\n                  onClick={(e) => handleMenuOpen(e, project)}\n                >\n                  <MoreVertIcon />\n                </IconButton>\n                <Typography gutterBottom variant=\"h6\" component=\"div\">\n                  {project.name}\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  {project.description}\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\n                  {project.imageCount} images\n                </Typography>\n              </CardContent>\n            </Card>\n          </Grid>\n        ))}\n      </Grid>\n\n      <Dialog open={openNewProject} onClose={() => setOpenNewProject(false)}>\n        <DialogTitle>Create New Project</DialogTitle>\n        <DialogContent>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            label=\"Project Name\"\n            fullWidth\n            value={newProjectName}\n            onChange={(e) => setNewProjectName(e.target.value)}\n          />\n          <TextField\n            margin=\"dense\"\n            label=\"Description\"\n            fullWidth\n            multiline\n            rows={4}\n            value={newProjectDescription}\n            onChange={(e) => setNewProjectDescription(e.target.value)}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOpenNewProject(false)}>Cancel</Button>\n          <Button onClick={handleCreateProject} variant=\"contained\">\n            Create\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      <Menu\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={handleMenuClose}\n      >\n        <MenuItem onClick={handleDeleteProject}>Delete Project</MenuItem>\n      </Menu>\n    </Container>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}